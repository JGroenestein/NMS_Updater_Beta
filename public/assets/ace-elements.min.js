!function(e){var n="multiple"in document.createElement("INPUT");e.fn.ace_file_input=function(t){var a=e.extend({style:!1,no_file:"No File ...",no_icon:"icon-upload-alt",btn_choose:"Choose",btn_change:"Change",icon_remove:"icon-remove",droppable:!1,thumbnail:!1,before_change:null,before_remove:null},t),i=!!window.FileList;return this.each(function(){var t=this,r=e(this),o=!!a.icon_remove,s=r.attr("multiple")&&n,l="well"==a.style?!0:!1;r.wrap("<div class='ace-file-input"+(l?" ace-file-multiple":"")+"' />"),r.after('<label data-title="'+a.btn_choose+'" for="'+e(this).attr("id")+'"><span data-title="'+a.no_file+'">'+(a.no_icon?'<i class="'+a.no_icon+'"></i>':"")+"</span></label>"+(o?'<a class="remove" href="#"><i class="'+a.icon_remove+'"></i></a>':""));var c=r.next();if(e.browser.mozilla&&c.on("click",function(){t.disabled||r.attr("readonly")||r.click()}),o&&c.next("a").on("click",function(){var e=!0;return a.before_remove&&(e=a.before_remove.call(t)),e?p():!1}),a.droppable&&i){var d=this.parentNode;e(d).on("dragenter",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover",function(e){e.preventDefault(),e.stopPropagation()}).on("drop",function(e){e.preventDefault(),e.stopPropagation();var n=e.originalEvent.dataTransfer,o=n.files;if(!s&&o.length>1){var l=[];l.push(o[0]),o=l}var c=!0;if(a.before_change&&(c=a.before_change.call(t,o,!0)),!c||0==c.length)return!1;(c instanceof Array||i&&c instanceof FileList)&&(o=c),r.data("ace_input_files",o),r.data("ace_input_method","drop");for(var d=[],f=0;f<o.length;f++)d.push(o[f].name);return u(d),r.triggerHandler("change",[!0]),!0})}r.on("change.inner_call",function(n,o){if(o!==!0){var s=!0;if(a.before_change&&(s=a.before_change.call(t,this.files||this.value,!1)),!s||0==s.length)return r.data("ace_input_files")||h(),!1;var l=s instanceof Array||i&&s instanceof FileList?s:this.files;r.data("ace_input_method","select");var c=[];if(l){r.data("ace_input_files",l);for(var d=0;d<l.length;d++){var f=e.trim(l[d].name);f&&c.push(f)}}else{var f=e.trim(this.value);f&&c.push(f)}return 0==c.length?!1:(u(c),!0)}});var u=function(e){var n=r.data("ace_input_files");l&&(c.find("span").remove(),a.btn_change||c.addClass("hide-placeholder")),c.attr("data-title",a.btn_change).addClass("selected");for(var t=0;t<e.length;t++){var i=e[t],o=i.lastIndexOf("\\")+1;0==o&&(o=i.lastIndexOf("/")+1),i=i.substr(o);var s="icon-file";if(/\.(jpe?g|png|gif|svg|bmp|tiff?)$/i.test(i)?s="icon-picture":/\.(mpe?g|flv|mov|avi|swf|mp4|mkv|webm|wmv|3gp)$/i.test(i)?s="icon-film":/\.(mp3|ogg|wav|wma|amr|aac)$/i.test(i)&&(s="icon-music"),l){c.append('<span data-title="'+i+'"><i class="'+s+'"></i></span>');var d=a.thumbnail&&n&&n[t].type.match("image")&&!!window.FileReader;d&&f(n[t],r)}else c.find("span").attr({"data-title":i}).find('[class*="icon-"]').attr("class",s)}return!0},f=function(n){var t=c.find("span:last"),i=50;"large"==a.thumbnail?i=150:"fit"==a.thumbnail&&(i=t.width()),t.addClass(i>50?"large":"").prepend("<img align='absmiddle' style='display:none;' />");var r=t.find("img:last").get(0),o=new FileReader;o.onload=function(t){return function(r){e(t).one("load",function(){var r=v(t,i,n.type),o=r.w,s=r.h;"small"==a.thumbnail&&(o=s=i),e(t).css({"background-image":"url("+r.src+")",width:o,height:s}).attr({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="}).show()}),t.src=r.target.result}}(r),o.readAsDataURL(n),o=null},p=function(){return c.attr({"data-title":a.btn_choose,"class":""}).find("span:first").attr({"data-title":a.no_file,"class":""}).find('[class*="icon-"]').attr("class",a.no_icon).prev("img").remove(),a.no_icon||c.find('[class*="icon-"]').remove(),c.find("span").not(":first").remove(),r.data("ace_input_files")&&(r.removeData("ace_input_files"),r.removeData("ace_input_method")),h(),!1},h=function(){r.wrap("<form>").closest("form").get(0).reset(),r.unwrap()},v=function(e,n,t){var a=document.createElement("canvas"),i=e.width,r=e.height;(i>n||r>n)&&(i>r?(r=parseInt(n/i*r),i=n):(i=parseInt(n/r*i),r=n)),a.width=i,a.height=r;var o=a.getContext("2d");return o.drawImage(e,0,0,e.width,e.height,0,0,i,r),{src:a.toDataURL("image/jpeg"==t?t:"image/png",10),w:i,h:r}}}),this}}(jQuery),function(e){e.fn.ace_spinner=function(n){return this.each(function(){var t=n.icon_up||"icon-chevron-up",a=n.icon_down||"icon-chevron-down",i=n.btn_up_class||"",r=n.btn_down_class||"",o=n.max||999;o=(""+o).length;var s=e(this).addClass("spinner-input").css("width",10*o+"px").wrap('<div class="ace-spinner">').after('<div class="spinner-buttons btn-group btn-group-vertical">						<button type="button" class="btn spinner-up btn-mini '+i+'">						<i class="'+t+'"></i>						</button>						<button type="button" class="btn spinner-down btn-mini '+r+'">						<i class="'+a+'"></i>						</button>						</div>').closest(".ace-spinner").spinner(n).wrapInner("<div class='input-append'></div>");e(this).on("mousewheel DOMMouseScroll",function(e){var n=e.originalEvent.detail<0||e.originalEvent.wheelDelta>0?1:-1;return s.spinner("step",n>0),s.spinner("triggerChangedEvent"),!1});var l=e(this);s.on("changed",function(){l.trigger("change")})}),this}}(jQuery),function(e){e.fn.ace_wizard=function(){return this.each(function(){var n=e(this),t=n.find("li"),a=t.length,i=parseFloat((100/a).toFixed(1))+"%";t.css({"min-width":i,"max-width":i}),n.removeClass("hidden").wizard();var r=n.nextAll(".wizard-actions").eq(0),o=n.data("wizard");o.$prevBtn=r.find(".btn-prev").eq(0).on("click",function(){n.wizard("previous")}),o.$nextBtn=r.find(".btn-next").eq(0).on("click",function(){n.wizard("next")}),o.nextText=o.$nextBtn.text()}),this}}(jQuery),function(e){e.fn.ace_colorpicker=function(n){var t=e.extend({pull_right:!1,caret:!0},n);return this.each(function(){var n=e(this),a="",i="";e(this).hide().find("option").each(function(){var e="colorpick-btn";this.selected&&(e+=" selected",i=this.value),a+='<li><a class="'+e+'" href="#" style="background-color:'+this.value+';" data-color="'+this.value+'"></a></li>'}).end().on("change.inner_call",function(){e(this).next().find(".btn-colorpicker").css("background-color",this.value)}).after('<div class="dropdown dropdown-colorpicker"><a data-toggle="dropdown" class="dropdown-toggle" href="#"><span class="btn-colorpicker" style="background-color:'+i+'"></span></a><ul class="dropdown-menu'+(t.caret?" dropdown-caret":"")+(t.pull_right?" pull-right":"")+'">'+a+"</ul></div>").next().find(".dropdown-menu").on("click",function(t){var a=e(t.target);if(!a.is(".colorpick-btn"))return!1;a.closest("ul").find(".selected").removeClass("selected"),a.addClass("selected");var i=a.data("color");return n.val(i).change(),t.preventDefault(),!0})}),this}}(jQuery),function(e){e.fn.ace_tree=function(n){var t={"open-icon":"icon-folder-open","close-icon":"icon-folder-close",selectable:!0,"selected-icon":"icon-ok","unselected-icon":"tree-dot"};return t=e.extend({},t,n),this.each(function(){var n=e(this);n.html('<div class = "tree-folder" style="display:none;">				<div class="tree-folder-header">					<i class="'+t["close-icon"]+'"></i>					<div class="tree-folder-name"></div>				</div>				<div class="tree-folder-content"></div>				<div class="tree-loader" style="display:none"></div>			</div>			<div class="tree-item" style="display:none;">				'+(null==t["unselected-icon"]?"":'<i class="'+t["unselected-icon"]+'"></i>')+'				<div class="tree-item-name"></div>			</div>'),n.addClass(1==t.selectable?"tree-selectable":"tree-unselectable"),n.tree(t)}),this}}(jQuery);